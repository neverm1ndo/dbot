doctype html
html(lang="en")
  head
    title='Diktorbot | Чат'
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no")
    link(rel="shortcut icon" href="/img/tank2.png")
    link(href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous")
    link(href="/stylesheets/chat.css" rel="stylesheet")
    script(type="text/javascript" src="/scripts/tmi.min.js")
  body
    if user
      div.chatters-list.w-100.h-100#chatters-list
        div.d-flex.flex-column.flex-nowrap.align-items-start.justify-content-stretch.h-100
          div.d-flex.w-100.head
            div.container-fluid
              div.d-flex.flex-row.pt-2.pb-2
                div.d-flex.justify-self-start
                  button.btn.btn-small.btn-secondary.close#close(type="button")
                    svg(width="100%" height="100%" version="1.1" viewBox="0 0 20 20" x="0px" y="0px")
                      g
                        path(d="M8.5 10L4 5.5 5.5 4 10 8.5 14.5 4 16 5.5 11.5 10l4.5 4.5-1.5 1.5-4.5-4.5L5.5 16 4 14.5 8.5 10z")
                div.d-flex.flex-fill.text-center
                  h5.w-100 Пользователи чата
          div.container-fluid.flex-fill.overflow-auto.pt-3.pb-3
            div.d-flex-flex-fill.list
              div#list
      div.d-flex.flex-column.flex-nowrap.h-100.align-items-start.justify-content-stretch
        div.d-flex.w-100.head
          div.container-fluid
            div.d-flex.flex-row.justify-content-between.align-content-start.pt-2.pb-2
              div.d-flex
                img.logo(src="/img/tank2.png")
                div.chatters-counter.d-flex.flex-row.justify-content-between.align-items-center
                  div.d-inline
                    svg(type="color-text-accessible-red" width="20px" height="20px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px")
                      g
                        path(fill-rule="evenodd" d="M5 7a5 5 0 116.192 4.857A2 2 0 0013 13h1a3 3 0 013 3v2h-2v-2a1 1 0 00-1-1h-1a3.99 3.99 0 01-3-1.354A3.99 3.99 0 017 15H6a1 1 0 00-1 1v2H3v-2a3 3 0 013-3h1a2 2 0 001.808-1.143A5.002 5.002 0 015 7zm5 3a3 3 0 110-6 3 3 0 010 6z" clip-rule="evenodd")
                    span#chatters-counter 0
                  div.d-inline.text-light.chatters-counter-alt
                    svg(type="color-text-accessible-red" width="20px" height="20px" version="1.1" viewBox="0 0 20 20" x="0px" y="0px")
                      g
                        path(fill-rule="evenodd" d="M5 7a5 5 0 116.192 4.857A2 2 0 0013 13h1a3 3 0 013 3v2h-2v-2a1 1 0 00-1-1h-1a3.99 3.99 0 01-3-1.354A3.99 3.99 0 017 15H6a1 1 0 00-1 1v2H3v-2a3 3 0 013-3h1a2 2 0 001.808-1.143A5.002 5.002 0 015 7zm5 3a3 3 0 110-6 3 3 0 010 6z" clip-rule="evenodd")
                    span#chatters-counter-alt.pl-3 0
              div
                img.avatar(src=user.data[0].profile_image_url)
              div.balance.d-flex.flex-row.align-items-end.justify-content-end
                button.btn.btn-small.btn-secondary.open-chatters-list#open-chatters-list(type="button")
                  svg(width="100%" height="100%" version="1.1" viewBox="0 0 20 20" x="0px" y="0px" class="ScIconSVG-sc-1bgeryd-1 cMQeyU")
                    g
                      path(fill-rule="evenodd" d="M7 2a4 4 0 00-1.015 7.87c-.098.64-.651 1.13-1.318 1.13A2.667 2.667 0 002 13.667V18h2v-4.333c0-.368.298-.667.667-.667.908 0 1.732-.363 2.333-.953.601.59 1.425.953 2.333.953.369 0 .667.299.667.667V18h2v-4.333A2.667 2.667 0 009.333 11c-.667 0-1.22-.49-1.318-1.13A4.002 4.002 0 007 2zM5 6a2 2 0 104 0 2 2 0 00-4 0z" clip-rule="evenodd")
                      path(d="M14 11.83V18h4v-3.75c0-.69-.56-1.25-1.25-1.25a.75.75 0 01-.75-.75v-.42a3.001 3.001 0 10-2 0z")
        div.d-flex.w-100.flex-fill.overflow-auto.mb-2
          div.container-fluid.h-100#chat.pt-2
        div.align-item-end.d-flex.chat-input.w-100
          div.container-fluid
            div.col-12.mb-3
              div#broadcaster-quickpanel.collapse
              div.input-group.w-100
                div.btn-group.dropup.emotes
                  button.btn.btn-small#emotes(type="button" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside")
                    svg(width="100%" height="100%" version="1.1" viewBox="0 0 20 20" x="0px" y="0px")
                      g
                        path(d="M7 11a1 1 0 100-2 1 1 0 000 2zM14 10a1 1 0 11-2 0 1 1 0 012 0zM10 14a2 2 0 002-2H8a2 2 0 002 2z")
                        path(fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-2 0a6 6 0 11-12 0 6 6 0 0112 0z" clip-rule="evenodd")
                  div.dropdown-menu.dropdown-menu-dark.p-2.mb-3
                    div#emotes-list.emotes-list
                label.chatty-label(for="chatty")
                input.form-control#text(type="text" name="chatty" placeholder="Отправить сообщение")
                button.btn.btn-dark#send(type="button" disabled) Чат
      script(type="text/javascript" src="https://cdn.jsdelivr.net/npm/underscore@1.13.1/underscore-umd-min.js")
      script(type="text/javascript" src="/scripts/polyfills.bundle.js")
      script(type="text/javascript" src="/scripts/chat.bundle.js")
    else
      canvas#bg(width="200px" height="100px")
      div.d-flex.flex-column.justify-content-center.align-items-center.h-100
        div.d-flex.flex-column.flex-nowrap.h-100.align-items-center.justify-content-center.z-1
          img#logo.mb-4(src="/img/tank2.png" alt="")
          a.btn.btn-twitch(href="/auth/twitch") Авторизация Twitch
        div.d-flex.flex-column
          a(href="https://nmnd.ru" target="_blank").cred.pt-2.pb-2 neverm1ndo
      script(type="text/javascript" src="/scripts/bg.bundle.js")
